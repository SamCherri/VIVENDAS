generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

enum Role {
  ADMIN
  RESIDENT
}

enum ReservationStatus {
  PENDING
  APPROVED
  CANCELED
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String?
  phone     String?
  apt       String
  role      Role     @default(RESIDENT)
  createdAt DateTime @default(now())
  reservations Reservation[]
}

model Area {
  id             Int      @id @default(autoincrement())
  name           String
  description    String?
  openHour       Int
  closeHour      Int
  slotMinutes    Int
  maxAdvanceDays Int
  maxDurationMins Int
  active         Boolean  @default(true)
  reservations   Reservation[]
}

model Reservation {
  id            Int      @id @default(autoincrement())
  area          Area     @relation(fields: [areaId], references: [id])
  areaId        Int
  user          User?    @relation(fields: [userId], references: [id])
  userId        Int?
  requesterName String
  apt           String
  phone         String
  startAt       DateTime
  endAt         DateTime
  status        ReservationStatus @default(PENDING)
  purpose       String?
  notes         String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}
